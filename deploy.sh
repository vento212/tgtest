#!/bin/bash

echo "๐ ะะฐัะธะฝะฐะตะผ ะฐะฒัะพะผะฐัะธัะตัะบะธะน ะดะตะฟะปะพะน ะฝะฐ Netlify..."

# ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฒัะต ะฟัะพัะตััั
echo "๐ ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฟัะพัะตััั..."
pkill -f "node\|npm\|react-scripts" > /dev/null 2>&1 || true

# ะกะพะฑะธัะฐะตะผ ะฟัะพะตะบั
echo "๐จ ะกะพะฑะธัะฐะตะผ ะฟัะพะตะบั..."
npm run build

# ะัะพะฒะตััะตะผ, ััะพ ัะฑะพัะบะฐ ะฟัะพัะปะฐ ััะฟะตัะฝะพ
if [ ! -d "build" ]; then
    echo "โ ะัะธะฑะบะฐ: ะฟะฐะฟะบะฐ build ะฝะต ัะพะทะดะฐะฝะฐ"
    exit 1
fi

echo "โ ะกะฑะพัะบะฐ ะทะฐะฒะตััะตะฝะฐ ััะฟะตัะฝะพ!"

# ะัะพะฒะตััะตะผ, ะฐะฒัะพัะธะทะพะฒะฐะฝ ะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะฒ Netlify
if ! netlify status > /dev/null 2>&1; then
    echo "๐ ะะฒัะพัะธะทะฐัะธั ะฒ Netlify..."
    echo "๐ ะกะปะตะดัะนัะต ะธะฝััััะบัะธัะผ ะฒ ะฑัะฐัะทะตัะต ะดะปั ะฐะฒัะพัะธะทะฐัะธะธ"
    netlify login
fi

# ะะตะฟะปะพะธะผ ะฝะฐ Netlify
echo "๐ ะะตะฟะปะพะธะผ ะฝะฐ Netlify..."
netlify deploy --prod --dir=build

echo ""
echo "๐ ะะตะฟะปะพะน ะทะฐะฒะตััะตะฝ!"
echo "๐ ะะต ะทะฐะฑัะดััะต:"
echo "   1. ะะฐัััะพะธัั ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั ะฒ Netlify Dashboard"
echo "   2. ะะพะฑะฐะฒะธัั ะดะพะผะตะฝ ะฒ Ton Connect Dashboard"
echo "   3. ะะพะปััะธัั API ะบะปัั TON Center" 