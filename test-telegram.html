<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram WebApp Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: white;
            padding: 20px;
            margin: 0;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        .info-box {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .status {
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
        }
        .success { background: rgba(40, 167, 69, 0.2); border: 1px solid rgba(40, 167, 69, 0.5); }
        .error { background: rgba(220, 53, 69, 0.2); border: 1px solid rgba(220, 53, 69, 0.5); }
        .warning { background: rgba(255, 193, 7, 0.2); border: 1px solid rgba(255, 193, 7, 0.5); }
        pre {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Telegram WebApp Test</h1>
        
        <div class="info-box">
            <h2>üì± –ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram WebApp</h2>
            <div id="telegram-status" class="status warning">–ü—Ä–æ–≤–µ—Ä—è–µ–º...</div>
        </div>

        <div class="info-box">
            <h2>üë§ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
            <div id="user-data" class="status warning">–ó–∞–≥—Ä—É–∂–∞–µ–º...</div>
        </div>

        <div class="info-box">
            <h2>üîß –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã</h2>
            <div id="methods" class="status warning">–ü—Ä–æ–≤–µ—Ä—è–µ–º...</div>
        </div>

        <div class="info-box">
            <h2>üìã –ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h2>
            <pre id="full-data">–ó–∞–≥—Ä—É–∂–∞–µ–º...</pre>
        </div>
    </div>

    <script>
        function updateStatus(elementId, status, message) {
            const element = document.getElementById(elementId);
            element.className = `status ${status}`;
            element.textContent = message;
        }

        function updateData(elementId, data) {
            const element = document.getElementById(elementId);
            element.textContent = JSON.stringify(data, null, 2);
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º Telegram WebApp
        if (window.Telegram?.WebApp) {
            const webApp = window.Telegram.WebApp;
            
            updateStatus('telegram-status', 'success', '‚úÖ Telegram WebApp –¥–æ—Å—Ç—É–ø–µ–Ω');
            
            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const user = webApp.initDataUnsafe?.user;
            if (user) {
                updateStatus('user-data', 'success', `‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${user.first_name} ${user.last_name || ''} (@${user.username || '–±–µ–∑ username'})`);
            } else {
                updateStatus('user-data', 'error', '‚ùå –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã');
            }

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–µ—Ç–æ–¥—ã
            const methods = [];
            if (typeof webApp.expand === 'function') methods.push('expand');
            if (typeof webApp.close === 'function') methods.push('close');
            if (typeof webApp.setHeaderColor === 'function') methods.push('setHeaderColor');
            if (typeof webApp.setBackgroundColor === 'function') methods.push('setBackgroundColor');
            
            updateStatus('methods', 'success', `‚úÖ –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã: ${methods.join(', ')}`);

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            updateData('full-data', {
                platform: webApp.platform,
                version: webApp.version,
                colorScheme: webApp.colorScheme,
                themeParams: webApp.themeParams,
                initData: webApp.initData,
                initDataUnsafe: webApp.initDataUnsafe,
                viewportHeight: webApp.viewportHeight,
                viewportStableHeight: webApp.viewportStableHeight
            });

            // –†–∞—Å—à–∏—Ä—è–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
            try {
                webApp.expand();
                console.log('‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–æ');
            } catch (error) {
                console.log('‚ùå –û—à–∏–±–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:', error);
            }

        } else {
            updateStatus('telegram-status', 'error', '‚ùå Telegram WebApp –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
            updateStatus('user-data', 'error', '‚ùå –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
            updateStatus('methods', 'error', '‚ùå –ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤');
            updateData('full-data', { error: 'Telegram WebApp –Ω–µ –Ω–∞–π–¥–µ–Ω' });
        }

        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
        console.log('üåê User Agent:', navigator.userAgent);
        console.log('üì± Screen:', screen.width, 'x', screen.height);
        console.log('üîó URL:', window.location.href);
    </script>
</body>
</html> 